!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=332)}({332:function(e,t,r){"use strict";r.r(t);var n=document.getElementById("teddies");function a(e,t){e.appendChild(t);for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];for(var o=0;o<n.length;o++)n[o]&&t.appendChild(n[o])}function o(e){for(var t=0;t<e.length;t++){var r=document.createElement("article");r.id=e[t]._id,r.className="col-12 col-sm-5 col-md-3 col-lg-2 m-auto m-sm-3 p-3 border rounded shadow-lg bg-white";var o=document.createElement("h2");o.innerHTML=e[t].name,o.className="text-center h4 text-nowrap";var i=document.createElement("div");i.className=" col-5 col-sm-8 col-md-10 h-50 mx-auto";var s=document.createElement("img");s.src=e[t].imageUrl,s.alt="Peluche d'ourson nommée "+e[t].name+" vendu par l'entreprise Orinoco",s.className="w-100 h-100";var l=document.createElement("p");l.innerHTML=e[t].price/100+" €",l.className="text-right font-weight-bold";var d=document.createElement("form");d.method="GET",d.action="product.html#"+e[t]._id;var m=document.createElement("input");m.type="submit",m.value="Description",m.className="btn btn-dark w-100 mb-4",n&&(a(n,r,o,i,l,d),a(i,s),a(d,m))}}var i=document.getElementById("cart"),s=document.querySelector("div .dropdown-menu");function l(e,t){e.appendChild(t);for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];for(var o=0;o<n.length;o++)n[o]&&t.appendChild(n[o])}var d="";function m(){d=1,document.getElementById("cart")&&i.addEventListener("click",(function(){if(s.classList.contains("show"))s.classList.remove("show");else if(localStorage.length>0){if(s.classList.add("show"),1!==d)return!1;!function(){if(window.localStorage&&null!==window.localStorage)for(var e=0;e<=localStorage.length-1;e++)u(localStorage.key(e))}()}d=2}))}function c(e){var t=JSON.parse(localStorage.getItem(e)),r=document.createElement("div");r.id=t.id,r.className="dropdown-item pl-1";var n=document.createElement("div");n.className="col-4 col-lg-12";var a=document.createElement("img");a.src=t.img,a.alt="Peluche d'ourson nommée "+t.name+" vendu par l'entreprise Orinoco",a.className="w-25 h-25 pr-2 d-inline";var o=document.createElement("p");o.className="text-center d-inline",o.innerHTML=t.name;var d=document.createElement("span");d.innerHTML="⊗",d.className="ml-4 h4",d.addEventListener("click",(function(){s.removeChild(r),s.removeChild(m),localStorage.removeItem(e),window.sessionStorage&&null!==window.sessionStorage&&sessionStorage.getItem(t.id)&&sessionStorage.removeItem(t.id)}));var m=document.createElement("div");m.className="dropdown-divider",i&&(l(i,s,r),l(r,n,a,o,d),l(s,m))}function u(e){return!!localStorage.getItem(e)&&c(e)}function p(e){for(var t=window.location.hash.substr(1),r=document.getElementById("onProductTeddies"),n=function(n){if(t==e[n]._id){var a=document.createElement("div");a.className="col-12 col-sm-4 h-75 ";var o=document.createElement("img");o.src=e[n].imageUrl,o.alt="Peluche d'ourson nommée "+e[n].name+" vendu par l'entreprise Orinoco",o.className="w-100 h-100 shadow-lg mt-1 rounded ";var i=document.createElement("div");i.className="col-12 col-sm-6 mt-2";var s=document.createElement("h2");s.innerHTML=e[n].name,s.className="text-center font-weight-bold h2";var m=document.createElement("label");m.innerHTML="Choix de la couleur : ",m.className="mt-2 mr-2";var u=document.createAttribute("for");u.value="colors-select",m.setAttributeNode(u);var p=document.createElement("select");p.name="colors",p.id="colors-select";for(var v=0;v<e[n].colors.length;v++){var f=document.createElement("option");f.value=e[n].colors[v],f.innerHTML=e[n].colors[v],p.appendChild(f)}var h=document.createElement("p");h.innerHTML=e[n].description,h.className="mt-4";var b=document.createElement("div");b.className="col-12 col-sm-2 px-0 mt-2";var E=document.createElement("p");E.innerHTML="Prix de : "+e[n].price/100+" €",E.className=" text-center border border-dark bg-dark text-white rounded w-75 mt-2 ml-2 py-2";var w=document.createElement("button");w.id="command",w.innerHTML="Ajouter au panier",w.className=" text-center btn btn-dark w-75 mt-2 ml-2",w.addEventListener("click",(function(){if(window.localStorage&&null!==window.localStorage)if(localStorage.getItem(t)){if(localStorage.getItem(t))return!1}else{var r={img:e[n].imageUrl,id:e[n]._id,name:e[n].name,price:e[n].price,quantity:1};r=localStorage.setItem(e[n]._id,JSON.stringify(r)),a=b,(o=document.getElementById("confirm"))?(a.removeChild(o),g(a)):g(a),2==d&&c(t)}else console.log("localStorage n'est pas supporté");var a,o})),r&&(l(r,a,o),l(r,i,s,m,p,h),l(r,b,E,w))}},a=0;a<e.length;a++)n(a)}function g(e,t){(t=document.createElement("div")).id="confirm",t.className=" text-center border border-dark bg-dark text-white rounded w-100 mt-4 mr-1 p-2";var r=document.createElement("p");r.textContent="Produit ajouté au panier avec succès";var n=document.createElement("div");n.className="dropdown-divider";var a=document.createElement("div");a.className="dropdown-divider";var o=document.createElement("p");o.innerHTML=" Il y a "+localStorage.length+" produit(s) dans votre panier";var i=document.createElement("div");i.className=" btn-group";var s=document.createElement("a");s.className="btn btn-light mb-2 mr-1",s.href="index.html",s.innerHTML="Continuer mes achats";var d=document.createElement("div");d.className=" btn-group";var m=document.createElement("a");m.className="btn btn-light mb-2",m.href="panier.html",m.innerHTML="Commander",l(e,t,r,n,o,a,i,d),l(i,s),l(d,m)}function v(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}var f={formValid:document.getElementById("submit-validation"),formulaire:document.querySelector("#formulaire"),inputsForm:{firstName:document.getElementById("firstName"),lastName:document.getElementById("lastName"),address:document.getElementById("adress"),city:document.getElementById("city"),email:document.getElementById("email"),codePostal:document.getElementById("cp"),inputFirstName:function(){return this.firstName.value},inputLastName:function(){return this.lastName.value},inputAddress:function(){return this.address.value},inputCity:function(){return this.city.value},inputCodePostal:function(){return this.codePostal.value},inputCodePostalCity:function(){return this.codePostal.value+" "+this.city.value},inputEmail:function(){return this.email.value}},regExpAll:{regExpName:/^[A-Z][a-zA-ZéèîïÉÈÎÏ][a-zéèêàçîï]+([-'\s][A-Z][a-zA-ZéèîïÉÈÎÏ][a-zéèêàçîï]+)?$/,regExpAdresse:/([0-9][ ])?[A-Za-zA-ZéèîïÉÈÎÏ][a-zéèêàçîï]+([-'\s][A-Z][a-zA-ZéèîïÉÈÎÏ][a-zéèêàçîï]+)?$/,regExpEmail:/^[a-z0-9._-]+@[a-z0-9._-]+\.[a-z]{2,6}$/}};function h(e){e.nextSibling.nextSibling.className="",e.nextSibling.nextSibling.textContent=""}function b(e,t,r,n,a){t&&e.classList.contains(t)?e.classList.remove(t):a&&e.classList.contains(a)?e.classList.remove(a):n&&e.classList.add(n),e.classList.add(r)}function E(e,t,r,n,a,o){var i=e.nextSibling.nextSibling;b(e,"border-"+t,"border-"+n),i.className="px-3",b(i,"bg-"+t,"bg-"+n,"text-"+a,"text-"+r),i.textContent=e.parentNode.firstElementChild.innerHTML+o}function w(e,t){t.test(e.value)?t.test(e.value)&&(b(e,"border-warning","border-success",!1,"border-danger"),h(e)):E(e,"danger","white","warning","dark","incorrect")}function y(e,t){if(e.length>1)for(var r=function(r){var n=e[0][r];n.addEventListener("blur",(function(){w(n,t)}))},n=0;n<e[0].length;n++)r(n);else e.addEventListener("blur",(function(){w(e,t)}))}function N(){var e=function(){for(var e=[],t=0;t<localStorage.length;t++){var r=localStorage.key(t),n=JSON.parse(localStorage.getItem(r));e.push(n.id)}return e}();return{contact:{firstName:f.inputsForm.inputFirstName(),lastName:f.inputsForm.inputLastName(),address:f.inputsForm.inputAddress(),city:f.inputsForm.inputCodePostalCity(),email:f.inputsForm.inputEmail()},products:e}}function x(){sessionStorage.getItem("IsThisFirstTime_Log_From_LiveServer")&&sessionStorage.removeItem("IsThisFirstTime_Log_From_LiveServer");for(var e=[],t=0,r=0;r<sessionStorage.length;r++){var n=sessionStorage.key(r),a=JSON.parse(sessionStorage.getItem(n));e.push(a.quantity)}if(e)for(var o=0;o<e.length;o++)t+=e[o];return t}function S(e,t){var r=document.createElement("div"),n=document.createElement("p");n.className="text-center h4 my-4",n.innerHTML="Votre panier est vide <br/> <span class='far fa-sad-cry h1 mt-4'></span>",e.insertBefore(r,t),r.appendChild(n)}function F(e,t,r,n,a,o,i){try{var s=e[o](i),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,a)}(function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:3000/api/teddies");case 3:if(!(t=e.sent).ok){e.next=13;break}return e.next=7,t.json();case 7:o(r=e.sent),p(r),m(),e.next=14;break;case 13:console.error("Retour du serveur : ",t.status);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){F(o,n,a,i,s,"next",e)}function s(e){F(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}})()(),document.getElementById("orderLocation")&&function(){var e="",t=document.getElementById("submit-validation").parentElement;localStorage.length<1?t.classList.add("d-none"):localStorage.length>=1&&t.classList.remove("d-none");for(var r=document.getElementById("orderLocation"),n=document.createElement("div"),a="",o=function(o){a=localStorage.key(o);var i=JSON.parse(localStorage.getItem(a)),d=document.createElement("div");d.className="border rounded border-dark mb-2 position-relative";var m=document.createAttribute("role");m.value="article",d.setAttributeNode(m);var c=document.createElement("img");c.src=i.img,c.alt="Peluche d'ourson nommée "+i.name+" vendu par l'entreprise Orinoco",c.className="w-25 h-25 pr-2 d-inline";var u=document.createElement("div");u.className=" d-inline-block";var p=document.createElement("p"),g=document.createElement("label");g.className="col-3 d-block position-absolute fixed-top mr-0 ml-auto p-0",g.innerHTML="Choix du nombre d'articles :";var v=document.createAttribute("for");v.value=i.id+10,g.setAttributeNode(v);var f=document.createElement("select");f.name="productQuantity",f.id=i.id+10,f.className="d-block position-absolute fixed-top mr-2 ml-auto mt-4 p-0";for(var h=0;h<20;h++){var b=document.createElement("option");b.value=h,b.innerHTML=h+1,f.appendChild(b)}if(e=parseInt(f.value)+parseInt(i.quantity),p.innerHTML=i.name+" : "+i.price/100+" €/U <br/> Nombre d'articles : "+e,sessionStorage.getItem("IsThisFirstTime_Log_From_LiveServer")&&sessionStorage.removeItem("IsThisFirstTime_Log_From_LiveServer"),window.sessionStorage&&null!==window.sessionStorage){var E={id:f.id,quantity:parseInt(e)*parseInt(i.price/100),valueInitial:parseInt(e)};sessionStorage.setItem(f.id,JSON.stringify(E))}f.addEventListener("change",(function(){if(e=parseInt(f.value)+parseInt(i.quantity),p.innerHTML=i.name+" : "+i.price/100+" €/U <br/> Nombre d'articles : "+e,sessionStorage.getItem("IsThisFirstTime_Log_From_LiveServer")&&sessionStorage.removeItem("IsThisFirstTime_Log_From_LiveServer"),window.sessionStorage&&null!==window.sessionStorage){var t={id:f.id,quantity:parseInt(e)*parseInt(i.price/100),valueInitial:parseInt(e)};sessionStorage.setItem(f.id,JSON.stringify(t))}l.innerHTML="Prix hors taxe : "+x()+"€<br/> Taux de TVA (20%) : "+Math.round(.2*x())+"€<br/>  Prix TTC : "+(x()+Math.round(.2*x()))+"€"})),console.log(x());var w=document.createElement("div");w.className="m-1 p-0";var y=document.createElement("div");y.className="btn btn-dark text-white w-100 h-50",y.innerHTML="Supprimer l'article",y.addEventListener("click",(function(){if(document.getElementById("cart")&&document.getElementById(i.id)){var e=document.getElementById(i.id).parentElement;e.removeChild(document.getElementById(i.id).nextElementSibling),e.removeChild(document.getElementById(i.id))}sessionStorage.getItem(i.id+10)&&(sessionStorage.removeItem(f.id),l.innerHTML="Prix hors taxe : "+x()+"€<br/> Taux de TVA (20%) : "+Math.round(.2*x())+"€<br/>  Prix TTC : "+(x()+Math.round(.2*x()))+"€"),n.removeChild(d),localStorage.removeItem(i.id),0===localStorage.length&&(S(r,t),t.classList.add("d-none"),r.removeChild(s),document.querySelector(".dropdown-menu").classList.remove("show"))})),localStorage.length>=1&&(n.appendChild(d),d.appendChild(c),d.appendChild(u),u.appendChild(p),d.appendChild(w),w.append(y),d.appendChild(g),d.appendChild(f))},i=0;i<localStorage.length;i++)o(i);var s=document.createElement("div"),l=document.createElement("p");l.className="text-right h4",l.innerHTML="Prix hors taxe : "+x()+"€<br/> Taux de TVA (20%) : "+Math.round(.2*x())+"€<br/>  Prix TTC : "+(x()+Math.round(.2*x()))+"€",localStorage.length>=1?(r.insertBefore(s,t),r.insertBefore(n,s),s.appendChild(l)):localStorage.length<1&&S(r,t)}(),(f.formulaire=document.querySelector("#formulaire"))&&(y(f.inputsForm.firstName,f.regExpAll.regExpName),y(f.inputsForm.lastName,f.regExpAll.regExpName),y(f.inputsForm.city,f.regExpAll.regExpName),y(f.inputsForm.address,f.regExpAll.regExpAdresse),y(f.inputsForm.email,f.regExpAll.regExpEmail),f.inputsForm.codePostal.addEventListener("blur",(function(){5!=f.inputsForm.inputCodePostal().length&&f.inputsForm.inputCodePostal().length>=1?E(f.inputsForm.codePostal,"danger","white","warning","dark","incorrect"):5==f.inputsForm.inputCodePostal().length&&(b(f.inputsForm.codePostal,"border-warning","border-success",!1,"border-danger"),h(f.inputsForm.codePostal))})),function(e){for(var t=function(t){var r=e.elements[t];r.addEventListener("blur",(function(){r.validity.valueMissing&&E(r,"warning","dark","danger","white","manquant")}))},r=0;r<e.elements.length-1;r++)t(r)}(f.formulaire)),(f.formValid=document.getElementById("submit-validation"))&&(f.formValid.addEventListener("click",(function(e){f.inputsForm.firstName&&(f.inputsForm.firstName.validity.valueMissing?f.inputsForm.firstName.validity.valueMissing&&(E(f.inputsForm.firstName,"warning","dark","danger","white","manquant"),e.preventDefault()):f.regExpAll.regExpName.test(f.inputsForm.inputFirstName())?f.regExpAll.regExpName.test(f.inputsForm.inputFirstName())&&(b(f.inputsForm.firstName,"border-warning","border-success",!1,"border-danger"),h(f.inputsForm.firstName)):(E(f.inputsForm.firstName,"danger","white","warning","dark","incorrect"),e.preventDefault())),f.inputsForm.lastName&&(f.inputsForm.lastName.validity.valueMissing?f.inputsForm.lastName.validity.valueMissing&&(E(f.inputsForm.lastName,"warning","dark","danger","white","manquant"),e.preventDefault()):f.regExpAll.regExpName.test(f.inputsForm.inputLastName())?f.regExpAll.regExpName.test(f.inputsForm.inputLastName())&&(b(f.inputsForm.lastName,"border-warning","border-success",!1,"border-danger"),h(f.inputsForm.lastName)):(E(f.inputsForm.lastName,"danger","white","warning","dark","incorrect"),e.preventDefault())),f.inputsForm.address&&(f.inputsForm.address.validity.valueMissing?f.inputsForm.address.validity.valueMissing&&(E(f.inputsForm.address,"warning","dark","danger","white","manquant"),e.preventDefault()):f.regExpAll.regExpAdresse.test(f.inputsForm.inputAddress())?f.regExpAll.regExpAdresse.test(f.inputsForm.inputAddress())&&(b(f.inputsForm.address,"border-warning","border-success",!1,"border-danger"),h(f.inputsForm.address)):(E(f.inputsForm.address,"danger","white","warning","dark","incorrect"),e.preventDefault())),f.inputsForm.codePostal&&(f.inputsForm.codePostal.validity.valueMissing?f.inputsForm.codePostal.validity.valueMissing&&(E(f.inputsForm.codePostal,"warning","dark","danger","white","manquant"),e.preventDefault()):5!=f.inputsForm.inputCodePostal().length&&f.inputsForm.inputCodePostal().length>=1?E(f.inputsForm.codePostal,"danger","white","warning","dark","incorrect"):5==f.inputsForm.inputCodePostal().length&&(b(f.inputsForm.codePostal,"border-warning","border-success",!1,"border-danger"),h(f.inputsForm.codePostal))),f.inputsForm.city&&(f.inputsForm.city.validity.valueMissing?f.inputsForm.city.validity.valueMissing&&(E(f.inputsForm.city,"warning","dark","danger","white","manquant"),e.preventDefault()):f.regExpAll.regExpName.test(f.inputsForm.inputCity())?f.regExpAll.regExpName.test(f.inputsForm.inputCity())&&(b(f.inputsForm.city,"border-warning","border-success",!1,"border-danger"),h(f.inputsForm.city)):(E(f.inputsForm.city,"danger","white","warning","dark","incorrect"),e.preventDefault())),f.inputsForm.email&&(f.inputsForm.email.validity.valueMissing?f.inputsForm.email.validity.valueMissing&&(E(f.inputsForm.email,"warning","dark","danger","white","manquant"),e.preventDefault()):f.regExpAll.regExpEmail.test(f.inputsForm.inputEmail())?f.regExpAll.regExpEmail.test(f.inputsForm.inputEmail())&&(b(f.inputsForm.email,"border-warning","border-success",!1,"border-danger"),h(f.inputsForm.email)):(E(f.inputsForm.email,"danger","white","warning","dark","incorrect"),e.preventDefault()))})),f.formulaire.addEventListener("submit",function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=N(),n=x()+Math.round(.2*x()),e.prev=3,e.next=6,fetch(f.formulaire.getAttribute("action"),{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(r)});case 6:e.sent.json().then((function(e){if(window.location.href="confirmation.html?orderId="+e.orderId,window.sessionStorage&&null!==window.sessionStorage){localStorage.clear(),sessionStorage.clear();var t={firstName:e.contact.firstName,lastName:e.contact.lastName,address:e.contact.address,city:e.contact.city,email:e.contact.email,id:e.orderId,sumTotal:n};sessionStorage.setItem("resultat",JSON.stringify(t))}else console.log("localStorage n'est pas supporté")})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){v(o,n,a,i,s,"next",e)}function s(e){v(o,n,a,i,s,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}())),function(){if(document.getElementById("orderConfirm")){Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};var e=(new Date).addDays(7).toLocaleString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(window.localStorage&&null!==window.localStorage){var t=JSON.parse(sessionStorage.getItem("resultat")),r=document.getElementById("orderConfirm"),n=document.createElement("div");n.className="bg-white border rounded shadow-lg mx-auto my-4 p-2";var a=document.createAttribute("role");a.value="article",n.setAttributeNode(a);var o=document.createElement("p");o.innerHTML=" Bonjour  <span class='font-weight-bold'>"+t.firstName+" "+t.lastName+",</span><br/> Nous vous remercions de votre commande. Nous vous tiendrons informé par e-mail lorsque les articles de votre commande auront été expédiés. Votre date de livraison estimée est indiquée ci-dessous.<br/> Montant de la commande : "+t.sumTotal+" €<br/> Livraison * : "+e+"<br/> Numéro de commande : "+t.id+"<br/> Votre commande sera expédiée à <br/>"+t.firstName+" "+t.lastName+"<br/>"+t.address+"<br/>"+t.city+"<br/><br/><span class='font-italic'> * Si la date de livraison estimée tombe sur un dimanche ou un jour fériée, la livraison sera repportée au jour ouvrable, ou le samedi, qui suit la date de livraison estimée.*</span>",r.appendChild(n),n.appendChild(o),sessionStorage.clear()}}}()}});